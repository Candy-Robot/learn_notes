# 0.2.4 硬盘与存储设备

## 传输接口

- IDE接口
  - IDE接口插槽所使用的排线较宽，每条排线上可以接两个IDE设备，为了判别两个设备的主/从（Master/Slave）架构，因此这种磁盘驱动器上面需要调整跳针（jump）成为Master或Slave才行。
- SATA接口
  - 插槽比IDE接口小很多，每条SATA连接线仅能接一个SATA设备。
  - 一块主板上SATA插槽的数量并不是固定的，且每个插槽都有编号。

# 3.2 磁盘分区

磁盘的第一个扇区记录了两个重要的信息：

- 主引导分区（Master Boot Record，MBR）：可以安装引导加载程序的地方，有446bytes
- 分区表（partition table）记录整块硬盘分区的状态。有64bytes

## 磁盘分区表

利用参考柱面号码的方式来分区。装载分区表的64bytes容量中，总共分为四组记录区，每组记录区记录了该区域的起始与结束的柱面号码。

因为只有64bytes 只能容纳四个分区，这四个分区被称为主(Primary)或扩展(Extended)分区。

> - 其实所谓的“分区”只是针对那64bytes的分区表进行设置而已
> - 硬盘默认的分区表仅能写入四组分区信息
> - 这四组分区信息我们称为主(Primary)或扩展(Extended)分区
> - 分区的最小单位为柱面

扩展分区的目的是使用额外的扇区来记录分区信息，扩展分区本身并不能拿来格式化。

扩展分区继续切分出来的分区，就被称为**逻辑分区**



主分区、扩展分区、逻辑分区的特性

> - 主分区与扩展分区最多可以有四个
> - 扩展分区最多只能有一个
> - 逻辑分区是由扩展分区持续切割出来的分区
> - 能够被格式化后作为数据访问的分区为主分区与逻辑分区。扩展分区无法格式化

## 开机流程与主引导分区

BIOS与CMOS，CMOS是记录各项硬件参数且嵌入在主板上面的存储器，BIOS则是一个写入到主板上的一个韧体。开机时会执行的第一个程序。读取第一个扇区的MBR位置。接下来由MBR内的引导加载程序工作。

整个开机流程到操作系统之前的动作。

> 1. BIOS：开机主动执行的韧体，会认识第一个可开机的设备
> 2. MBR：第一个可开机设备的第一个扇区内的主引导分区块，内包含引导加载程序
> 3. 引导加载程序（Boot loader）：一支可读取内核文件来执行软件
> 4. 内核文件：开始操作系统的功能

引导加载程序是操作系统安装在MBR上的一套软件。主要任务由

- 提供菜单
- 载入内核文件
- 转交给其他loader
  - 引导加载程序不但可以装在mbr上，还可以装在每个分区的引导扇区（boot sector）

<img src="/Users/candy/Documents/资源/基础知识/learn_notes/鸟哥的Linux/3章、主机规划与磁盘分区.assets/image-20220622171113009.png" alt="image-20220622171113009" style="zoom: 33%;" />

- 每个分区都有自己的启动扇区
- 图中的系统分区为第一及第二分区
- 实际可开机的内核文件都是放置到各分区内的。
- loader只会认识自己系统分区内的可开机内核文件，以及其他loader



## 磁盘分区的选择

### 文件系统与目录树的关系

所谓“挂载”就是利用一个目录当成进入点，将磁盘分区的数据放置在该目录下，也就是说进入改目录就可以读取该分区的意思。

